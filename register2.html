<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>جدول دانشجویان با حذف</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@33.003/misc/Farsi-Digits/Vazirmatn-FD-font-face.css" rel="stylesheet">
  <style>
      *{
             font-family: "Vazirmatn fd";
        }
  </style>
</head>
<body class="bg-light p-4">

  <div class="container">
    <h2 class="mb-4 text-center">اطلاعات دانشجویان</h2>

    <!-- دکمه باز کردن مودال -->
    <div class="text-end mb-3">
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#studentModal">افزودن دانشجو</button>
    </div>

    <!-- جدول دانشجویان -->
    <table class="table table-bordered table-striped text-center">
      <thead class="table-dark">
        <tr>
          <th>نام</th>
          <th>شماره ملی</th>
          <th>سن</th>
          <th>عملیات</th>
        </tr>
      </thead>
      <tbody id="studentTableBody">
        <!-- ردیف‌ها با جاوااسکریپت اضافه می‌شوند -->
      </tbody>
    </table>
  </div>

  <!-- مودال ورود اطلاعات -->
  <div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="studentForm">
          <div class="modal-header">
            <h5 class="modal-title" id="studentModalLabel">افزودن دانشجو</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="name" class="form-label">نام</label>
              <input type="text" class="form-control" id="name" required>
            </div>
            <div class="mb-3">
              <label for="nationalId" class="form-label">شماره ملی</label>
              <input type="text" class="form-control" id="nationalId" required>
            </div>
            <div class="mb-3">
              <label for="age" class="form-label">سن</label>
              <input type="number" class="form-control" id="age" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">افزودن</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">انصراف</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- اسکریپت جاوااسکریپت -->
  <script>
    const tableBody = document.getElementById("studentTableBody");
    const studentForm = document.getElementById("studentForm");

    studentForm.addEventListener("submit", function(event) {
      event.preventDefault();

      const name = document.getElementById("name").value;
      const nationalId = document.getElementById("nationalId").value;
      const age = document.getElementById("age").value;

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${name}</td>
        <td>${nationalId}</td>
        <td>${age}</td>
        <td><button class="btn btn-danger btn-sm delete-btn">حذف</button></td>
      `;
      tableBody.appendChild(row);

      studentForm.reset();
      const modal = bootstrap.Modal.getInstance(document.getElementById("studentModal"));
      modal.hide();
    });

    // حذف ردیف با delegation
    tableBody.addEventListener("click", function(event) {
      if (event.target.classList.contains("delete-btn")) {
        const row = event.target.closest("tr");
        row.remove();
      }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
